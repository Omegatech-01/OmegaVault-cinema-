<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#121212" />
  <title>OmegaVault - Ultimate Streaming</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="https://files.catbox.moe/3z07rr.jpg" type="image/jpeg">
  <style>
    :root {
      --background-color: #121212;
      --primary-card-color: #1e1e1e;
      --accent-color: #e50914;
      --secondary-accent-color: #ffffff;
      --text-primary: #ffffff;
      --text-secondary: #b3b3b3;
      --border-color: #2c2c2c;
      --shadow-color: rgba(0, 0, 0, 0.5);
      --hot-theme-bg: linear-gradient(135deg, #1a0000, #330000);
      --hot-theme-accent: #ff0044;
      --hot-theme-text: #ffcccc;
      --hot-shadow: 0 0 15px rgba(255, 0, 68, 0.6);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background-color: var(--background-color); color: var(--text-primary);
      font-family: 'Inter', sans-serif; overflow-x: hidden; background-size: cover;
      background-position: center; background-attachment: fixed; transition: background-image 1s ease-in-out;
    }
    .content-wrapper { position: relative; z-index: 1; background-color: rgba(18, 18, 18, 0.85); }
    header {
      position: fixed; top: 0; left: 0; width: 100%;
      background: rgba(20, 20, 20, 0.7); backdrop-filter: blur(10px);
      z-index: 1000; padding: 15px 50px; border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      display: flex; flex-direction: column; align-items: center; gap: 10px;
    }
    .header-logo {
      display: flex; align-items: center; gap: 12px; color: var(--accent-color);
      text-decoration: none; font-weight: 900; font-size: 2.5rem; justify-content: center;
    }
    .omega-symbol { font-weight: 900; }
    .header-nav { display: flex; align-items: center; justify-content: space-between; width: 100%; max-width: 1400px; }
    .header-left { display: flex; align-items: center; gap: 20px; }
    .tabs { display: flex; gap: 20px; }
    .tab-button {
      background: none; border: none; color: var(--text-primary); font-size: 1.2rem;
      cursor: pointer; display: flex; align-items: center; gap: 5px; transition: color 0.3s ease;
    }
    .tab-button.active { color: var(--accent-color); font-weight: 700; }
    .tab-button:hover { color: var(--accent-color); }
    .menu-button { background: none; border: none; cursor: pointer; padding: 5px; transition: transform 0.3s ease; }
    .menu-button:hover { transform: scale(1.1); }
    .menu-button .bar { display: block; width: 28px; height: 3px; background-color: var(--accent-color); margin: 6px 0; transition: all 0.3s ease; }
    .search-bar { max-width: 600px; width: 100%; }
    .search-bar input {
      width: 100%; padding: 12px 20px; background: rgba(30, 30, 30, 0.7); color: var(--text-primary);
      border: 1px solid var(--border-color); border-radius: 50px; font-size: 1rem; transition: all 0.3s ease;
    }
    .search-bar input:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 8px rgba(229, 9, 20, 0.5); }
    .side-menu {
      position: fixed; top: 0; left: 0; width: 300px; height: 100%;
      background: rgba(24, 24, 24, 0.85); backdrop-filter: blur(10px);
      z-index: 1001; transform: translateX(-100%); transition: transform 0.3s ease-in-out;
      padding: 20px; padding-top: 80px; overflow-y: auto; border-right: 1px solid rgba(255, 255, 255, 0.1);
    }
    .side-menu.show { transform: translateX(0); }
    .side-menu h3 { color: var(--accent-color); margin-bottom: 20px; font-size: 1.5rem; font-weight: 700; }
    .side-menu a {
      display: block; color: var(--text-primary); text-decoration: none; padding: 12px;
      border-radius: 8px; margin-bottom: 8px; font-size: 1.1rem; transition: all 0.2s ease;
    }
    .side-menu a:hover { background-color: var(--primary-card-color); color: var(--accent-color); }
    .side-menu-close {
      background: var(--accent-color); color: var(--secondary-accent-color); border: none; padding: 10px;
      border-radius: 6px; font-size: 1rem; cursor: pointer; margin-top: 10px; transition: all 0.2s ease;
    }
    .side-menu-close:hover { background: #c40812; }
    .nollywood-year-list { display: none; padding-left: 20px; }
    main { padding-top: 120px; }
    .hero-banner {
      height: 80vh; position: relative; display: flex; align-items: flex-end;
      padding: 50px; background-size: cover; background-position: center; margin-bottom: 50px;
      overflow: hidden; transition: background-image 0.5s ease;
    }
    .hero-banner::after { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(to top, rgba(18, 18, 18, 1) 15%, transparent 100%); }
    .hero-content { position: relative; z-index: 2; max-width: 700px; }
    .hero-content h2 { font-size: 4rem; font-weight: 900; margin: 0; line-height: 1.2; }
    .hero-content p { font-size: 1.2rem; color: var(--text-secondary); margin: 15px 0; display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; overflow: hidden; }
    .hero-content button { background: var(--accent-color); color: var(--secondary-accent-color); border: none; padding: 15px 30px; font-size: 1.1rem; font-weight: 700; border-radius: 6px; cursor: pointer; transition: all 0.3s ease; }
    .hero-content button:hover { background: #c40812; transform: translateY(-2px); box-shadow: 0 4px 10px var(--shadow-color); }
    .section { margin: 50px; max-width: 1800px; margin-left: auto; margin-right: auto; }
    .section h3 { margin-bottom: 25px; font-size: 2rem; font-weight: 700; color: var(--text-primary); }
    .swiper-slide { width: 260px; }
    .movie-card {
      background: var(--primary-card-color); border-radius: 10px; overflow: hidden;
      position: relative; cursor: pointer; box-shadow: 0 5px 15px var(--shadow-color);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .movie-card:hover { transform: scale(1.08); box-shadow: 0 10px 25px var(--shadow-color); z-index: 10; }
    .movie-card img { width: 100%; height: 390px; object-fit: cover; display: block; }
    .movie-title-overlay {
      position: absolute; bottom: 0; left: 0; right: 0; padding: 25px 15px;
      background: linear-gradient(to top, rgba(0, 0, 0, 0.95), transparent);
      color: var(--text-primary); font-weight: 600; font-size: 1.1rem; text-align: center;
      opacity: 0; transition: opacity 0.3s ease;
    }
    .movie-card:hover .movie-title-overlay { opacity: 1; }
    .grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 30px; padding: 50px; }
    .nollywood-movie-card { display: flex; flex-direction: column; background: var(--primary-card-color); border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px var(--shadow-color); transition: transform 0.3s ease; cursor: pointer; }
    .nollywood-movie-card:hover { transform: scale(1.05); }
    .nollywood-movie-card img { width: 100%; height: auto; aspect-ratio: 16 / 9; object-fit: cover; }
    .nollywood-movie-card-content { padding: 15px; flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
    .nollywood-movie-card h4 { font-size: 1.1rem; margin: 0 0 10px 0; color: var(--text-primary); }
    .nollywood-movie-card p { font-size: 0.9rem; color: var(--text-secondary); margin: 0; }
    .modal {
      display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px); justify-content: center;
      align-items: center; z-index: 1002; opacity: 0; transition: opacity 0.3s ease;
    }
    .modal.show { display: flex; opacity: 1; }
    .modal-content {
      background: rgba(26, 26, 26, 0.85); backdrop-filter: blur(10px); padding: 40px;
      border-radius: 12px; width: 90%; max-height: 90vh; overflow-y: auto;
      border: 1px solid rgba(255, 255, 255, 0.1); transform: scale(0.8);
      transition: transform 0.3s ease, opacity 0.3s ease; text-align: center; position: relative;
    }
    .modal.show .modal-content { transform: scale(1); opacity: 1; }
    .modal-close-button { position: absolute; top: 15px; right: 15px; background: none; border: none; color: var(--text-secondary); font-size: 2rem; cursor: pointer; transition: color 0.2s ease, transform 0.2s ease; z-index: 10; }
    .modal-close-button:hover { color: var(--accent-color); transform: scale(1.1); }
    #infoModal .modal-content { max-width: 1200px; }
    .modal-header {
      display: flex;
      gap: 25px;
      align-items: center;
      margin-bottom: 30px;
      text-align: left;
    }
    .modal-header img {
      width: 200px;
      border-radius: 10px;
      box-shadow: 0 4px 10px var(--shadow-color);
    }
    .modal-header-info h2 {
      margin: 0;
      font-size: 2.5rem;
      font-weight: 900;
      line-height: 1.2;
    }
    #nollywoodModal .modal-content { max-width: 800px; }
    #nollywoodModal h2 { font-size: 2.2rem; font-weight: 900; margin-bottom: 20px; }
    .player-container {
      margin: 20px 0;
      position: relative;
      padding-top: 56.25%;
    }
    .player-container video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 10px;
      background-color: #000;
    }
    .player-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      border-radius: 10px;
    }
    .nollywood-poster-container { position: relative; margin-bottom: 20px; }
    .nollywood-poster-container img { width: 100%; border-radius: 10px; display: block; }
    .play-button-overlay {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        background: rgba(0, 0, 0, 0.6); color: white; border: 2px solid white; border-radius: 50%;
        width: 80px; height: 80px; font-size: 3rem; cursor: pointer; display: flex;
        align-items: center; justify-content: center; padding-left: 8px; transition: all 0.2s ease;
    }
    .play-button-overlay:hover { background: var(--accent-color); transform: translate(-50%, -50%) scale(1.1); }
    .modal-actions {
      display: flex;
      gap: 20px;
      justify-content: center;
      margin-top: 25px;
      flex-wrap: wrap;
    }
    .action-button {
      flex-grow: 1;
      padding: 15px 20px;
      text-decoration: none;
      border-radius: 8px;
      font-size: 1.2rem;
      font-weight: 700;
      transition: all 0.2s ease;
      border: none;
      cursor: pointer;
      max-width: 250px;
    }
    .action-button:hover { transform: scale(1.05); box-shadow: 0 4px 10px var(--shadow-color); }
    .play-button { background-color: var(--accent-color); color: var(--secondary-accent-color); }
    .download-button { background: #00b7eb; color: #000; }
    .download-container { margin-top: 25px; width: 100%; text-align: left; }
    .download-container h4 { color: var(--accent-color); border-bottom: 1px solid var(--border-color); padding-bottom: 12px; margin-bottom: 20px; font-size: 1.6rem; font-weight: 700; }
    .download-card { background: #242424; padding: 20px; border-radius: 10px; margin-bottom: 15px; transition: transform 0.2s ease; }
    .download-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px var(--shadow-color); }
    .info-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
    .quality { font-weight: 700; font-size: 1.3rem; }
    .size, .health { font-size: 1rem; color: var(--text-secondary); }
    .download-card .actions { display: flex; gap: 15px; }
    .download-card .action-button { padding: 12px; font-size: 1rem; }
    .retry-button { background: var(--accent-color); color: var(--secondary-accent-color); border: none; padding: 10px 20px; border-radius: 6px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: all 0.2s ease; margin-top: 15px; display: inline-block; }
    .retry-button:hover { background: #c40812; }
    .swiper-button-next, .swiper-button-prev { color: var(--accent-color); background: rgba(18, 18, 18, 0.8); border-radius: 50%; width: 48px; height: 48px; transition: all 0.3s ease; }
    .swiper-button-next:hover, .swiper-button-prev:hover { background: var(--accent-color); color: var(--secondary-accent-color); }
    .status-message, .error-message { grid-column: 1 / -1; text-align: center; padding: 25px; font-size: 1.2rem; color: var(--text-secondary); }
    .error-message { color: #ff5555; }
    .loading-spinner {
      border: 6px solid var(--border-color); border-top: 6px solid var(--accent-color);
      border-right: 6px solid #ff0000; border-bottom: 6px solid #00ff00; border-left: 6px solid #0000ff;
      border-radius: 50%; width: 48px; height: 48px;
      animation: spin 0.8s ease-in-out infinite; margin: 30px auto;
    }
    .modal-loading { display: flex; justify-content: center; align-items: center; min-height: 80px; }
    .modal-loading::after { content: ''; border: 6px solid var(--border-color); border-top: 6px solid var(--accent-color); border-right: 6px solid #ff0000; border-bottom: 6px solid #00ff00; border-left: 6px solid #0000ff; border-radius: 50%; width: 48px; height: 48px; animation: spin 0.8s ease-in-out infinite; }
    #aboutPage { padding: 50px; max-width: 900px; margin: 0 auto; line-height: 1.8; }
    #aboutPage h1 { font-size: 3rem; color: var(--accent-color); text-align: center; margin-bottom: 30px; }
    #aboutPage h2 { font-size: 1.8rem; color: var(--accent-color); margin-top: 40px; margin-bottom: 15px; border-bottom: 2px solid var(--border-color); padding-bottom: 10px; }
    #aboutPage p { margin-bottom: 20px; color: var(--text-secondary); }
    #aboutPage ul { list-style: none; padding-left: 0; }
    #aboutPage li { background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23e50914" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>') no-repeat left center; padding-left: 35px; margin-bottom: 15px; font-size: 1.1rem; }
    .contact-buttons { display: flex; justify-content: center; gap: 20px; margin-top: 40px; flex-wrap: wrap; }
    .contact-btn { text-decoration: none; color: white; padding: 15px 30px; border-radius: 8px; font-weight: 700; font-size: 1.1rem; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 10px; }
    .whatsapp-btn { background-color: #25D366; }
    .whatsapp-btn:hover { background-color: #1DAE54; }
    .donate-btn { background-color: #FFC107; color: #121212; }
    .donate-btn:hover { background-color: #FFB300; }
    #adultPage { padding: 50px; max-width: 1800px; margin: 0 auto; background: var(--hot-theme-bg); color: var(--hot-theme-text); font-family: 'Playfair Display', serif; }
    #adultPage .search-bar input { background: rgba(30, 0, 0, 0.7); border-color: var(--hot-theme-accent); color: var(--hot-theme-text); }
    #adultPage .search-bar input:focus { border-color: var(--hot-theme-accent); box-shadow: var(--hot-shadow); }
    #adultPage h1 { font-size: 3.5rem; color: var(--hot-theme-accent); text-align: center; margin-bottom: 30px; text-shadow: var(--hot-shadow); }
    #adultPage h3 { color: var(--hot-theme-accent); text-shadow: var(--hot-shadow); }
    .adult-movie-card { background: rgba(30, 0, 0, 0.7); border: 2px solid var(--hot-theme-accent); border-radius: 15px; overflow: hidden; box-shadow: var(--hot-shadow); transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .adult-movie-card:hover { transform: scale(1.05); box-shadow: 0 0 25px rgba(255, 0, 68, 0.8); }
    .adult-movie-card img { height: 360px; object-fit: cover; filter: brightness(1.1); }
    .adult-movie-card-content h4 { color: var(--hot-theme-text); font-family: 'Playfair Display', serif; }
    #adultModal .modal-content { background: rgba(30, 0, 0, 0.85); border-color: var(--hot-theme-accent); box-shadow: var(--hot-shadow); }
    #adultModal h2 { color: var(--hot-theme-accent); text-shadow: var(--hot-shadow); }
    #passwordModal .modal-content { max-width: 500px; background: var(--hot-theme-bg); color: var(--hot-theme-text); }
    #passwordModal .modal-content input {
      width: 100%; padding: 12px; margin: 15px 0; background: rgba(30, 0, 0, 0.7);
      border: 1px solid var(--hot-theme-accent); color: var(--hot-theme-text);
      border-radius: 6px; font-size: 1rem;
    }
    #passwordModal .modal-content button {
      background: var(--hot-theme-accent); color: var(--secondary-accent-color);
      border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer;
      transition: all 0.2s ease; margin: 10px; box-shadow: var(--hot-shadow);
    }
    #passwordModal .modal-content button:hover { background: #ff0066; box-shadow: 0 0 20px rgba(255, 0, 102, 0.8); }
    .category-tabs { display: flex; justify-content: center; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; }
    .category-tab {
      background: rgba(30, 0, 0, 0.7); color: var(--hot-theme-text); border: 1px solid var(--hot-theme-accent);
      padding: 10px 20px; border-radius: 20px; cursor: pointer; transition: all 0.3s ease; box-shadow: var(--hot-shadow);
    }
    .category-tab.active { background: var(--hot-theme-accent); color: var(--secondary-accent-color); box-shadow: 0 0 15px rgba(255, 0, 68, 0.8); }
    .category-tab:hover { background: var(--hot-theme-accent); color: var(--secondary-accent-color); box-shadow: 0 0 15px rgba(255, 0, 68, 0.8); }
    #adultModal .play-button { background-color: var(--hot-theme-accent); box-shadow: var(--hot-shadow); }
    #adultModal .play-button:hover { background-color: #ff0066; box-shadow: 0 0 20px rgba(255, 0, 102, 0.8); }
    #adultModal .download-button { background: #ff00aa; color: #fff; box-shadow: var(--hot-shadow); }
    #adultModal .download-button:hover { background: #cc0088; box-shadow: 0 0 20px rgba(204, 0, 136, 0.8); }
    .play-button-overlay { background: rgba(255, 0, 68, 0.6); border-color: var(--hot-theme-accent); }
    .play-button-overlay:hover { background: var(--hot-theme-accent); }
    .install-prompt {
      display: none; position: fixed; bottom: 20px; right: 20px; background: var(--accent-color);
      color: var(--secondary-accent-color); padding: 15px 25px; border-radius: 8px; box-shadow: 0 4px 10px var(--shadow-color);
      z-index: 1003; font-size: 1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease;
    }
    .install-prompt.show { display: block; }
    .install-prompt:hover { background: #c40812; transform: scale(1.05); }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    @media (max-width: 768px) {
      .header-logo { font-size: 2rem; }
      .hero-banner { height: 60vh; padding: 30px; }
      .hero-content h2 { font-size: 2.8rem; }
      .section { margin: 30px; }
      .grid-container { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); padding: 20px; }
      .swiper-slide { width: 220px; }
      .movie-card img { height: 330px; }
      .modal-content { width: 95%; padding: 25px; }
      .modal-header { flex-direction: column; align-items: center; text-align: center; }
      .modal-header img { width: 160px; }
      .adult-movie-card img { height: 300px; }
    }
    @media (max-width: 480px) {
      .header-nav { flex-direction: column; gap: 10px; }
      .grid-container { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; padding: 15px; }
      .swiper-slide { width: 180px; }
      .movie-card img { height: 270px; }
      .download-card .actions { flex-direction: column; }
      .adult-movie-card img { height: 240px; }
    }
  </style>
</head>
<body>
  <div class="content-wrapper">
    <header>
      <a href="#" class="header-logo" id="headerLogo">
        <div class="omega-symbol">Œ©</div>
        <div class="logo-text">OmegaVault</div>
      </a>
      <div class="header-nav">
        <div class="header-left">
          <button class="menu-button" id="menuBtn" aria-label="Open menu">
            <span class="bar"></span><span class="bar"></span><span class="bar"></span>
          </button>
          <div class="tabs">
            <button class="tab-button active" id="homeTab">üè† Home</button>
            <button class="tab-button" id="nollywoodTab">üé• Nollywood</button>
          </div>
        </div>
        <div class="search-bar">
          <input id="searchInput" type="text" placeholder="Search for movies, series..." />
        </div>
      </div>
    </header>

    <nav class="side-menu" id="mainMenu">
      <h3>Menu</h3>
      <a href="#" id="menuHomeBtn">üè† Home</a>
      <a href="#" id="menuNollywoodBtn">üé• Nollywood</a>
      <a href="#" id="menuAdultBtn">üî• +18</a>
      <a href="#" id="menuAboutBtn">‚ÑπÔ∏è About</a>
      <hr style="border-color: var(--border-color); margin: 15px 0;">
      <div id="yearListContainer">
        <h4>Browse by Year</h4>
        <div id="yearList"></div>
      </div>
      <div id="nollywoodCategoryContainer" style="display: none;">
        <h4>Nollywood Categories</h4>
        <a href="#" class="nollywood-category" data-query="latest nollywood movie">Latest</a>
        <a href="#" class="nollywood-category" data-query="funny nollywood movie">Comedy</a>
        <a href="#" class="nollywood-year-toggle">Year ‚ñº</a>
        <div class="nollywood-year-list"></div>
      </div>
      <button class="side-menu-close">‚ùå Close</button>
    </nav>

    <main>
      <div id="homePage">
        <div class="hero-banner" id="heroBanner" style="display:none;">
          <div class="hero-content">
            <h2 id="heroTitle"></h2><p id="heroOverview"></p>
            <button id="heroMoreInfoBtn">Get Links</button>
          </div>
        </div>
        <div id="homepageSections"></div>
        <div id="resultsGrid" class="grid-container" style="display: none;"></div>
      </div>

      <div id="nollywoodPage" style="display: none;">
        <div class="section">
          <h3 id="nollywoodSectionTitle">Trending Nollywood</h3>
          <div id="nollywoodResultsGrid" class="grid-container"></div>
        </div>
      </div>

      <div id="aboutPage" style="display: none;">
        <h1>Welcome to OmegaVault</h1>
        <p>OmegaVault is your ultimate destination for an unparalleled streaming experience. We bring you a vast library of movies, series, and exclusive content, all in one place, designed for seamless access and top-quality entertainment.</p>
        
        <h2>Why Choose OmegaVault?</h2>
        <ul>
          <li><strong>Extensive Content Library:</strong> Dive into a massive collection of Hollywood blockbusters, Nollywood hits, and exclusive +18 content, updated regularly to keep you entertained.</li>
          <li><strong>Superior Streaming Quality:</strong> Enjoy high-quality streaming and reliable download links for both mainstream and adult content.</li>
          <li><strong>Intelligent Search:</strong> Our advanced search engine delivers precise results, even for vague queries, across all categories, including our exclusive +18 section.</li>
          <li><strong>Free Access:</strong> OmegaVault is completely free, with no subscriptions or hidden fees, making entertainment accessible to everyone.</li>
          <li><strong>Exclusive +18 Experience:</strong> Explore our secure, password-protected +18 section with a seductive theme, featuring curated categories, search, and direct play/download options.</li>
        </ul>

        <h2>Join Our Community</h2>
        <p>OmegaVault is built with passion by a dedicated team. Your support through feedback, suggestions, or donations helps us keep the platform thriving. Connect with us directly or contribute to our mission!</p>
        <div class="contact-buttons">
          <a href="https://wa.me/+23279729810" target="_blank" class="contact-btn whatsapp-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.487 5.235 3.487 8.413 0 6.557-5.338 11.892-11.894 11.892-1.99 0-3.903-.52-5.687-1.475l-6.162 1.688a.5.5 0 0 1-.65-.65zM19.268 15.631c-.131-.21-.462-.338-.937-.585-.475-.246-2.812-1.385-3.248-1.54-.436-.155-.752-.246-.062.246.69 1.54.436 2.813-.185 3.488-.621.675-1.316.8-1.63.247-.312-.552-.879-1.74-1.82-2.895-1.258-1.54-2.02-2.113-2.342-2.788-.322-.675-.031-1.006.217-1.303.218-.268.475-.69.688-.976.213-.285.285-.523.436-.869.151-.347.076-.648-.046-.895-.122-.247-.621-1.475-.845-2.02-.224-.546-.462-.475-.69-.475-.228 0-.492-.03-.752-.03-.26 0-.69.075-.995.436-.304.36-.845 1.006-1.09 2.02-.244 1.016-.062 2.49.492 3.488.552.996 1.54 2.813 3.755 4.922 2.53 2.34 3.755 2.642 4.36 2.813.604.17 1.155.136 1.587-.09.492-.26 1.392-1.258 1.587-2.02.195-.762.195-1.348.136-1.54z"/></svg>
            <span>Talk to Owner</span>
          </a>
          <a href="#" id="donateBtn" class="contact-btn donate-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-9h4v2h-4v-2zm0 4h4v2h-4v-2zm-4-4h2v2H6v-2zm12 0h2v2h-2v-2z"/></svg>
            <span>Donate</span>
          </a>
        </div>
      </div>

      <div id="adultPage" style="display: none;">
        <h1>üî• +18 Content</h1>
        <div class="search-bar">
          <input id="adultSearchInput" type="text" placeholder="Search +18 content..." />
        </div>
        <div class="category-tabs">
          <button class="category-tab active" data-query="Casted Raw">Casted Raw</button>
          <button class="category-tab" data-query="Ebony">Ebony</button>
          <button class="category-tab" data-query="Big ass">Big ass</button>
          <button class="category-tab" data-query="Teen">Teen</button>
          <button class="category-tab" data-query="MILF">MILF</button>
          <button class="category-tab" data-query="Lesbian">Lesbian</button>
          <button class="category-tab" data-query="Anal">Anal</button>
          <button class="category-tab" data-query="POV">POV</button>
          <button class="category-tab" data-query="Amateur">Amateur</button>
          <button class="category-tab" data-query="Big Tits">Big Tits</button>
        </div>
        <div class="section">
          <h3 id="adultSectionTitle">Casted Raw üòã</h3>
          <div id="adultResultsGrid" class="grid-container"></div>
        </div>
        <div id="adultAboutPage" style="display: none; padding: 20px;">
          <h2>About +18 Section</h2>
          <p>Welcome to OmegaVault's exclusive +18 section, designed for adult audiences seeking premium, curated content. Explore a variety of categories with a sleek, seductive interface, featuring high-quality videos, search functionality, and direct play/download options. This section is password-protected to ensure privacy and security.</p>
          <p>Connect with us for feedback or support:</p>
          <div class="contact-buttons">
            <a href="https://wa.me/+23279729810" target="_blank" class="contact-btn whatsapp-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.487 5.235 3.487 8.413 0 6.557-5.338 11.892-11.894 11.892-1.99 0-3.903-.52-5.687-1.475l-6.162 1.688a.5.5 0 0 1-.65-.65zM19.268 15.631c-.131-.21-.462-.338-.937-.585-.475-.246-2.812-1.385-3.248-1.54-.436-.155-.752-.246-.062.246.69 1.54.436 2.813-.185 3.488-.621.675-1.316.8-1.63.247-.312-.552-.879-1.74-1.82-2.895-1.258-1.54-2.02-2.113-2.342-2.788-.322-.675-.031-1.006.217-1.303.218-.268.475-.69.688-.976.213-.285.285-.523.436-.869.151-.347.076-.648-.046-.895-.122-.247-.621-1.475-.845-2.02-.224-.546-.462-.475-.69-.475-.228 0-.492-.03-.752-.03-.26 0-.69.075-.995.436-.304.36-.845 1.006-1.09 2.02-.244 1.016-.062 2.49.492 3.488.552.996 1.54 2.813 3.755 4.922 2.53 2.34 3.755 2.642 4.36 2.813.604.17 1.155.136 1.587-.09.492-.26 1.392-1.258 1.587-2.02.195-.762.195-1.348.136-1.54z"/></svg>
              <span>Talk to Owner</span>
            </a>
            <a href="#" id="adultDonateBtn" class="contact-btn donate-btn">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path xmlns="http://www.w3.org/2000/svg" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-2-9h4v2h-4v-2zm0 4h4v2h-4v-2zm-4-4h2v2H6v-2zm12 0h2v2h-2v-2z"/></svg>
              <span>Donate</span>
            </a>
          </div>
        </div>
      </div>
    </main>
  </div>

  <div class="modal" id="infoModal">
    <div class="modal-content">
      <button class="modal-close-button">√ó</button>
      <div class="modal-header">
        <img id="modalPoster" src="" alt="Poster" />
        <div class="modal-header-info">
          <h2 id="modalTitle"></h2>
        </div>
      </div>
      <div class="player-container" id="modalPlayer" style="display: none;">
        <video id="modalVideo" controls>
          <source id="videoSource" src="" type="video/mp4">
          <track id="videoSubtitle" kind="subtitles" srclang="en" label="English">
        </video>
      </div>
      <div class="modal-actions">
        <button id="modalPlayBtn" class="action-button play-button">Play Now</button>
        <a id="modalDownloadBtn" href="#" class="action-button download-button" target="_blank">Download</a>
      </div>
      <div id="direct-links-container" class="download-container"></div>
      <div id="recommendations-container" class="download-container"></div>
    </div>
  </div>

  <div class="modal" id="nollywoodModal">
    <div class="modal-content">
      <button class="modal-close-button">√ó</button>
      <h2 id="nollywoodModalTitle"></h2>
      <div class="nollywood-poster-container" id="nollywoodPosterContainer">
          <img id="nollywoodModalPoster" src="" alt="Poster" />
          <button class="play-button-overlay" id="nollywoodModalPlayBtn">‚ñ∂</button>
      </div>
      <div class="player-container" id="nollywoodModalPlayer" style="display: none;"></div>
      <div class="modal-actions">
        <a id="nollywoodModalDownload" href="#" class="action-button download-button" target="_blank">Download ‚Üì</a>
      </div>
    </div>
  </div>

  <div class="modal" id="adultModal">
    <div class="modal-content">
      <button class="modal-close-button">√ó</button>
      <h2 id="adultModalTitle"></h2>
      <div class="nollywood-poster-container" id="adultPosterContainer">
        <img id="adultModalPoster" src="" alt="Poster" />
        <button class="play-button-overlay" id="adultModalPlayBtn">‚ñ∂</button>
      </div>
      <div class="player-container" id="adultModalPlayer" style="display: none;"></div>
      <div class="modal-actions">
        <button id="adultModalPlay" class="action-button play-button">Watch Now üî•</button>
        <a id="adultModalDownload" href="#" class="action-button download-button" target="_blank">Download HD ‚Üì</a>
      </div>
    </div>
  </div>

  <div class="modal" id="passwordModal">
    <div class="modal-content">
      <button class="modal-close-button">√ó</button>
      <h2 id="passwordModalTitle">Enter Password</h2>
      <input id="passwordInput" type="password" placeholder="Enter your password" />
      <button id="passwordSubmitBtn">Submit</button>
      <button id="passwordCreateBtn" style="display: none;">Create Password</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    "use strict";

    document.addEventListener('DOMContentLoaded', () => {
        const API_SOURCES = {
            moviesSearch: "https://apis.davidcyriltech.my.id/movies/search?query=",
            zoomSearch: "https://apis.davidcyriltech.my.id/zoom/search?query=",
            download: "https://apis.davidcyriltech.my.id/movies/download?url=",
            ytsSearch: "https://yts.mx/api/v2/list_movies.json?limit=50&query_term=",
            movieboxTrending: "https://moviebox.ph/wefeed-h5-bff/web/subject/trending",
            movieboxSearch: "https://moviebox.ph/wefeed-h5-bff/web/subject/search?query=",
            youtubeSearch: "https://restapi-v2.simplebot.my.id/search/youtube?q=",
            youtubeDownload: "https://restapi-v2.simplebot.my.id/download/ytmp4?url=",
            adultSearch: "https://restapi-v2.simplebot.my.id/search/xnxx?q=",
            adultDownload: "https://restapi-v2.simplebot.my.id/download/xnxx?url=",
            movieboxDetails: "https://moviebox.ph/wefeed-h5-bff/web/subject/detail?subjectId=",
            movieboxRec: "https://moviebox.ph/wefeed-h5-bff/web/subject/recommendation?subjectId=",
            movieboxCaption: "https://moviebox.ph/wefeed-h5-bff/web/subtitle?url=",
            playUrl: "https://apis.davidcyriltech.my.id/movies/play?url=",
            downloadUrl: "https://moviebox.ph/wefeed-h5-bff/web/download?url="
        };
        const PROXIES = ["https://api.allorigins.win/raw?url=", "https://cors.eu.org/"];
        const FALLBACK_IMAGE = "https://via.placeholder.com/260x390?text=No+Poster";
        const CATEGORIES = ['Latest', 'Top List', 'Action', 'Romance', 'Horror', 'Anime', 'Comedy', 'Drama', 'Sci-Fi'];
        const ADULT_CATEGORIES = ['Casted Raw', 'Ebony', 'Big ass', 'Teen', 'MILF', 'Lesbian', 'Anal', 'POV', 'Amateur', 'Big Tits'];
        const CACHE_EXPIRATION_MS = 3600000;
        const MAX_RETRIES = 3;
        const RETRY_DELAY_MS = 1000;
        const cache = new Map();
        let currentProxyIndex = 0;
        let activeView = 'home';
        let deferredPrompt = null;
        let historyState = [];

        const sanitizeTitleForURL = (title) => {
            return title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
        };

        const updateURL = (path, title = '') => {
            const cleanPath = title ? `${path}/${sanitizeTitleForURL(title)}` : path;
            historyState.push({ view: activeView, query: title });
            window.history.pushState({ view: activeView, query: title }, '', cleanPath);
        };

        const parseURL = () => {
            const path = window.location.pathname.split('/').filter(p => p);
            let view = path[0] || 'home';
            const query = path.slice(1).join(' ').replace(/-/g, ' ');
            if (!['home', 'nollywood', 'adult', 'about'].includes(view)) view = 'home';
            return { view, query };
        };

        const switchView = (view, query = '') => {
            activeView = view;
            document.getElementById('homePage').style.display = view === 'home' ? 'block' : 'none';
            document.getElementById('nollywoodPage').style.display = view === 'nollywood' ? 'block' : 'none';
            document.getElementById('aboutPage').style.display = view === 'about' ? 'block' : 'none';
            document.getElementById('adultPage').style.display = view === 'adult' ? 'block' : 'none';
            document.getElementById('homeTab').classList.toggle('active', view === 'home');
            document.getElementById('nollywoodTab').classList.toggle('active', view === 'nollywood');
            document.getElementById('searchInput').placeholder = view === 'home' ? 'Search movies...' : view === 'nollywood' ? 'Search Nollywood...' : view === 'adult' ? 'Search +18 content...' : 'Search...';
            document.getElementById('searchInput').style.display = view === 'about' ? 'none' : 'block';
            document.getElementById('yearListContainer').style.display = view === 'home' || view === 'about' ? 'block' : 'none';
            document.getElementById('nollywoodCategoryContainer').style.display = view === 'nollywood' ? 'block' : 'none';
            if (view === 'adult') {
                document.querySelector('.header-nav').style.display = 'none';
                document.querySelector('header').style.background = 'var(--hot-theme-bg)';
            } else {
                document.querySelector('.header-nav').style.display = 'flex';
                document.querySelector('header').style.background = 'rgba(20, 20, 20, 0.7)';
            }
            if (view === 'home' && query) homeModule.search(query);
            else if (view === 'home') homeModule.loadHero();
            if (view === 'nollywood' && query) nollywoodModule.displayVideos('latest nollywood movie');
            if (view === 'adult' && query) adultModule.displayVideos(query);
            else if (view === 'adult') adultModule.displayVideos('Casted Raw');
        };

        window.addEventListener('popstate', (event) => {
            const state = event.state || parseURL();
            historyState.pop();
            switchView(state.view, state.query);
        });

        const fetchRandomBackground = async () => {
            try { document.body.style.backgroundImage = `url(https://picsum.photos/1920/1080?random=${Date.now()})`; } 
            catch (error) { console.error("Failed to fetch random background:", error); }
        };

        const fetchAPI = async (url, retries = MAX_RETRIES) => {
            const cacheKey = `fetch:${url}`;
            if (cache.has(cacheKey) && (Date.now() - cache.get(cacheKey).timestamp < CACHE_EXPIRATION_MS)) {
                return cache.get(cacheKey).data;
            }
            let lastError = null;
            for (let i = 0; i < PROXIES.length; i++) {
                for (let attempt = 0; attempt < retries; attempt++) {
                    try {
                        const proxyUrl = `${PROXIES[currentProxyIndex]}${encodeURIComponent(url)}`;
                        const response = await fetch(proxyUrl);
                        if (!response.ok) throw new Error(`API error: ${response.status}`);
                        const textContent = await response.text();
                        if (!textContent) throw new Error("Empty API response");
                        const data = JSON.parse(textContent);
                        cache.set(cacheKey, { data, timestamp: Date.now() });
                        return data;
                    } catch (error) {
                        lastError = error;
                        if (attempt < retries - 1) await new Promise(resolve => setTimeout(resolve, RETRY_DELAY_MS));
                    }
                }
                currentProxyIndex = (currentProxyIndex + 1) % PROXIES.length;
            }
            throw lastError;
        };

        const homeModule = {
            normalizeData(movie) {
                if (!movie || !movie.data) return {};
                if (movie.source === 'moviebox') return { 
                    title: movie.data.title, 
                    image: movie.data.cover?.url || FALLBACK_IMAGE, 
                    overview: movie.data.description || '', 
                    link: `https://moviebox.ph/web/subject/${movie.data.detailPath}`,
                    subjectId: movie.data.subjectId,
                    seasons: movie.data.resource?.seasons || [],
                    playUrl: movie.data.resource?.playUrl || ''
                };
                if (movie.source === 'yts') return { 
                    title: movie.data.title_long || movie.data.title, 
                    image: movie.data.large_cover_image || FALLBACK_IMAGE, 
                    overview: movie.data.summary || '', 
                    link: movie.data.url 
                };
                return { 
                    title: movie.data.title, 
                    image: movie.data.image || FALLBACK_IMAGE, 
                    overview: movie.data.overview || '', 
                    link: movie.data.link 
                };
            },

            addMovie(movie, source, map) {
                const normalized = this.normalizeData({ source, data: movie });
                if (normalized.title && normalized.image) map.set(normalized.title.toLowerCase().trim(), { source, data: movie });
            },

            async singleSearch(query, page = 1) {
                const searchPromises = [
                    fetchAPI(`${API_SOURCES.moviesSearch}${encodeURIComponent(query)}&page=${page}`),
                    fetchAPI(`${API_SOURCES.zoomSearch}${encodeURIComponent(query)}&page=${page}`),
                    fetchAPI(`${API_SOURCES.ytsSearch}${encodeURIComponent(query)}&page=${page}`),
                    fetchAPI(`${API_SOURCES.movieboxSearch}${encodeURIComponent(query)}&page=${page}`)
                ];
                const results = await Promise.allSettled(searchPromises);
                const combined = new Map();
                results.forEach((result, index) => {
                    if (result.status === 'fulfilled' && result.value) {
                        let movies = [], source = '';
                        if (index === 0) { source = 'movies'; movies = result.value.results || []; }
                        else if (index === 1) { source = 'zoom'; movies = result.value.results || []; }
                        else if (index === 2) { source = 'yts'; movies = result.value.data?.movies || []; }
                        else if (index === 3) { source = 'moviebox'; movies = result.value.data?.subjectList || []; }
                        if (Array.isArray(movies)) movies.forEach(m => this.addMovie(m, source, combined));
                    }
                });
                return Array.from(combined.values());
            },

            async restlessSearch(originalQuery, page = 1) {
                const cacheKey = `search:${originalQuery}:page:${page}`;
                if (cache.has(cacheKey) && (Date.now() - cache.get(cacheKey).timestamp < CACHE_EXPIRATION_MS)) {
                    return cache.get(cacheKey).data;
                }

                let results = [];
                let currentPage = page;
                const maxPages = 5;
                const minResults = 10;

                while (results.length < minResults && currentPage <= maxPages) {
                    const searchPromises = [
                        fetchAPI(`${API_SOURCES.moviesSearch}${encodeURIComponent(originalQuery)}&page=${currentPage}`),
                        fetchAPI(`${API_SOURCES.zoomSearch}${encodeURIComponent(originalQuery)}&page=${currentPage}`),
                        fetchAPI(`${API_SOURCES.ytsSearch}${encodeURIComponent(originalQuery)}&page=${currentPage}`),
                        fetchAPI(`${API_SOURCES.movieboxSearch}${encodeURIComponent(originalQuery)}&page=${currentPage}`)
                    ];

                    const settled = await Promise.allSettled(searchPromises);
                    const combined = new Map();

                    settled.forEach((result, index) => {
                        if (result.status === 'fulfilled' && result.value) {
                            let movies = [], source = '';
                            if (index === 0) { source = 'movies'; movies = result.value.results || []; }
                            else if (index === 1) { source = 'zoom'; movies = result.value.results || []; }
                            else if (index === 2) { source = 'yts'; movies = result.value.data?.movies || []; }
                            else if (index === 3) { source = 'moviebox'; movies = result.value.data?.subjectList || []; }
                            if (Array.isArray(movies)) movies.forEach(m => this.addMovie(m, source, combined));
                        }
                    });

                    results = Array.from(combined.values());
                    if (results.length >= minResults) break;
                    currentPage++;
                }

                if (results.length === 0) {
                    const cleanQuery = originalQuery.replace(/\s*\(\d{4}\)/, '').trim();
                    if (cleanQuery !== originalQuery) {
                        results = await this.singleSearch(cleanQuery);
                        if (results.length > 0) {
                            cache.set(cacheKey, { data: results, timestamp: Date.now() });
                            return results;
                        }
                    }

                    const twoWords = originalQuery.split(' ').slice(0, 2).join(' ');
                    if (twoWords.length > 3 && twoWords !== originalQuery) {
                        results = await this.singleSearch(twoWords);
                        if (results.length > 0) {
                            cache.set(cacheKey, { data: results, timestamp: Date.now() });
                            return results;
                        }
                    }
                }

                cache.set(cacheKey, { data: results, timestamp: Date.now() });
                return results;
            },

            renderResults(container, movies, isSwiper) {
                container.innerHTML = '';
                if (!movies || movies.length === 0) {
                    container.innerHTML = `<p class="status-message">No results found.</p>`;
                    return;
                }
                movies.forEach(movie => {
                    const normalized = this.normalizeData(movie);
                    const card = document.createElement("div");
                    card.className = isSwiper ? "swiper-slide movie-card" : "movie-card";
                    card.innerHTML = `<img src="${normalized.image}" alt="${normalized.title}" loading="lazy" onerror="this.src='${FALLBACK_IMAGE}'" /><div class="movie-title-overlay">${normalized.title}</div>`;
                    card.onclick = () => {
                        this.openModal(movie);
                        updateURL(`/${activeView}`, normalized.title);
                    };
                    container.appendChild(card);
                });
            },

            async search(query) {
                if (!query.trim()) return;
                document.getElementById("homepageSections").style.display = "none";
                document.getElementById("heroBanner").style.display = "none";
                const resultsGrid = document.getElementById("resultsGrid");
                resultsGrid.style.display = "grid";
                resultsGrid.innerHTML = '<div class="loading-spinner"></div>';
                try {
                    const results = await this.restlessSearch(query);
                    this.renderResults(resultsGrid, results, false);
                    updateURL('/home', query);
                } catch (err) {
                    console.error("Search error:", err);
                    resultsGrid.innerHTML = `<p class="error-message">Search failed: ${err.message}. Please try again.</p>`;
                }
            },

            async loadCategory(swiperInstance, query) {
                const container = swiperInstance.el.querySelector('.swiper-wrapper');
                container.innerHTML = '<div class="loading-spinner"></div>';
                try {
                    const movies = await this.singleSearch(query);
                    if (movies.length === 0) {
                        container.innerHTML = `<p class="status-message">No movies found for ${query}.</p>`;
                        return;
                    }
                    this.renderResults(container, movies.slice(0, 20), true);
                    swiperInstance.update();
                } catch (err) {
                    console.error(`Failed to load category ${query}:`, err);
                    container.innerHTML = `<p class="error-message">Failed to load ${query}: ${err.message}.</p>`;
                }
            },

            async loadHero() {
                try {
                    const data = await fetchAPI(API_SOURCES.movieboxTrending);
                    const movie = data.data?.subjectList?.[0];
                    if (movie) {
                        const normalized = this.normalizeData({ source: 'moviebox', data: movie });
                        const heroBanner = document.getElementById('heroBanner');
                        heroBanner.style.backgroundImage = `url(${normalized.image})`;
                        document.getElementById('heroTitle').textContent = normalized.title;
                        document.getElementById('heroOverview').textContent = normalized.overview;
                        document.getElementById('heroMoreInfoBtn').onclick = () => {
                            this.openModal({ source: 'moviebox', data: movie });
                            updateURL('/home', normalized.title);
                        };
                        heroBanner.style.display = 'flex';
                    }
                } catch (err) { console.error("Hero load failed:", err); }
            },

            async openModal(movie) {
                const normalized = this.normalizeData(movie);
                document.getElementById("modalTitle").textContent = normalized.title;
                document.getElementById("modalPoster").src = normalized.image;
                document.getElementById("infoModal").classList.add("show");
                document.getElementById('modalPlayer').style.display = 'none';
                document.getElementById('modalDownloadBtn').href = '#';
                document.getElementById('direct-links-container').innerHTML = '<div class="modal-loading"></div>';
                document.getElementById('recommendations-container').innerHTML = '<div class="modal-loading"></div>';

                // Set up Play button functionality
                const playBtn = document.getElementById('modalPlayBtn');
                const playerContainer = document.getElementById('modalPlayer');
                const videoElement = document.getElementById('modalVideo');
                const videoSource = document.getElementById('videoSource');
                const subtitleTrack = document.getElementById('videoSubtitle');

                playBtn.onclick = async () => {
                    playerContainer.style.display = 'block';
                    let playUrl = '';

                    if (movie.source === 'moviebox' && normalized.playUrl) {
                        playUrl = normalized.playUrl;
                    } else if (movie.source === 'yts' || movie.source === 'movies' || movie.source === 'zoom') {
                        const playData = await fetchAPI(`${API_SOURCES.playUrl}${encodeURIComponent(normalized.title)}`);
                        playUrl = playData?.url || '';
                    }

                    if (playUrl) {
                        videoSource.src = playUrl;
                        videoElement.load();

                        // Attempt to fetch subtitles for moviebox content
                        if (movie.source === 'moviebox' && normalized.subjectId) {
                            try {
                                const subtitleData = await fetchAPI(`${API_SOURCES.movieboxCaption}${normalized.subjectId}`);
                                if (subtitleData?.url) {
                                    subtitleTrack.src = subtitleData.url;
                                    subtitleTrack.track.mode = 'showing';
                                }
                            } catch (err) {
                                console.error("Subtitle fetch failed:", err);
                            }
                        }

                        videoElement.play().catch(err => console.error("Video play failed:", err));
                    } else {
                        alert('No playable video source available.');
                        playerContainer.style.display = 'none';
                    }
                };

                // Fetch download link
                if (movie.source === 'moviebox' && normalized.subjectId) {
                    try {
                        const downloadData = await fetchAPI(`${API_SOURCES.downloadUrl}${normalized.subjectId}`);
                        if (downloadData?.data?.downloads?.length) {
                            const firstDownload = downloadData.data.downloads[0];
                            document.getElementById('modalDownloadBtn').href = firstDownload.url || '#';
                        }
                    } catch (err) {
                        console.error("Download link fetch failed:", err);
                    }
                } else if (movie.source === 'yts' && movie.data.torrents?.length) {
                    const firstTorrent = movie.data.torrents[0];
                    const magnet = `magnet:?xt=urn:btih:${firstTorrent.hash}&dn=${encodeURIComponent(normalized.title)}`;
                    document.getElementById('modalDownloadBtn').href = magnet;
                }

                this.fetchDownloadLinks(movie, document.getElementById('direct-links-container'));
                this.fetchRecommendations(movie, document.getElementById('recommendations-container'));
                updateURL('/home', normalized.title);
            },

            async fetchDownloadLinks(movie, container) {
                const normalized = this.normalizeData(movie);
                container.innerHTML = '<h4>Download Links</h4>';
                const maxRetries = 3;
                const retryDelay = 1000;

                const fetchFromSource = async (apiUrl, source) => {
                    let attempt = 0;
                    while (attempt < maxRetries) {
                        try {
                            const data = await fetchAPI(apiUrl);
                            let links = [];
                            if (source === 'moviebox' && normalized.subjectId) {
                                links = data.data?.downloads || [];
                                if (normalized.seasons && normalized.seasons.length) {
                                    const seasonSelect = document.createElement('select');
                                    seasonSelect.innerHTML = '<option value="">Select Season</option>';
                                    normalized.seasons.forEach(season => {
                                        seasonSelect.innerHTML += `<option value="${season.se}">${season.name || `Season ${season.se}`}</option>`;
                                    });
                                    container.appendChild(seasonSelect);

                                    seasonSelect.onchange = () => {
                                        const se = parseInt(seasonSelect.value);
                                        if (se) {
                                            const episodeSelect = document.createElement('select');
                                            episodeSelect.innerHTML = '<option value="">Select Episode</option>';
                                            const maxEp = normalized.seasons.find(s => s.se === se)?.maxEp || 1;
                                            for (let ep = 1; ep <= maxEp; ep++) {
                                                episodeSelect.innerHTML += `<option value="${ep}">Episode ${ep}</option>`;
                                            }
                                            if (container.querySelector('.episode-select')) container.removeChild(container.querySelector('.episode-select'));
                                            container.appendChild(episodeSelect);

                                            episodeSelect.onchange = () => {
                                                const ep = parseInt(episodeSelect.value);
                                                if (ep) this.fetchDownloadLinks({ ...movie, season: se, episode: ep }, container);
                                            };
                                        }
                                    };
                                }
                                if (links.length) {
                                    container.innerHTML += `<h5>${source} Downloads</h5>`;
                                    links.forEach(l => {
                                        if (l.url) {
                                            container.innerHTML += `
                                                <div class="download-card">
                                                    <div class="info-row">
                                                        <div class="quality">${l.quality || 'SD'}</div>
                                                        <div class="size">${l.size || 'N/A'}</div>
                                                    </div>
                                                    <div class="actions">
                                                        <a href="${l.url}" download class="action-button direct-download">Download</a>
                                                    </div>
                                                </div>`;
                                        }
                                    });
                                }
                            } else if (source === 'movies' || source === 'zoom') {
                                links = data.movie?.download_links || [];
                                if (links.length) {
                                    container.innerHTML += `<h5>${source} Downloads</h5>`;
                                    links.forEach(l => {
                                        if (l.direct_download) {
                                            container.innerHTML += `
                                                <div class="download-card">
                                                    <div class="info-row">
                                                        <div class="quality">${l.quality || 'SD'}</div>
                                                        <div class="size">${l.size || 'N/A'}</div>
                                                    </div>
                                                    <div class="actions">
                                                        <a href="${l.direct_download}" download class="action-button direct-download">Download</a>
                                                    </div>
                                                </div>`;
                                        }
                                    });
                                }
                            } else if (source === 'yts') {
                                links = data.data?.movies?.[0]?.torrents || [];
                                if (links.length) {
                                    container.innerHTML += `<h5>${source} Torrents</h5>`;
                                    links.forEach(t => {
                                        const magnet = `magnet:?xt=urn:btih:${t.hash}&dn=${encodeURIComponent(normalized.title)}`;
                                        container.innerHTML += `
                                            <div class="download-card">
                                                <div class="info-row">
                                                    <div class="quality">${t.quality}.${t.type}</div>
                                                    <div class="size">${t.size}</div>
                                                </div>
                                                <div class="info-row">
                                                    <div class="health">Seeds: ${t.seeds} | Peers: ${t.peers}</div>
                                                </div>
                                                <div class="actions">
                                                    <a href="${magnet}" class="action-button magnet-link">Magnet</a>
                                                </div>
                                            </div>`;
                                    });
                                }
                            }
                            if (links.length) return true;
                            throw new Error(`No links found from ${source}.`);
                        } catch (err) {
                            attempt++;
                            if (attempt < maxRetries) await new Promise(resolve => setTimeout(resolve, retryDelay));
                            else container.innerHTML += `<p class="error-message">Failed to fetch ${source} links: ${err.message}</p>`;
                        }
                    }
                    return false;
                };

                const apisToFetch = [];
                if (movie.source === 'moviebox' && normalized.subjectId) {
                    apisToFetch.push({ api: `${API_SOURCES.downloadUrl}${normalized.subjectId}${normalized.season ? `&se=${normalized.season}&ep=${normalized.episode || 1}` : ''}`, source: 'moviebox' });
                }
                if (movie.source === 'movies' || movie.source === 'zoom') {
                    apisToFetch.push({ api: `${API_SOURCES.download}${encodeURIComponent(normalized.link)}`, source: movie.source });
                }
                if (movie.source === 'yts') {
                    apisToFetch.push({ api: `${API_SOURCES.ytsSearch}${encodeURIComponent(normalized.title)}`, source: 'yts' });
                }

                for (const { api, source } of apisToFetch) {
                    await fetchFromSource(api, source);
                }

                if (container.children.length <= 1) {
                    container.innerHTML += `<p class="error-message">No download links found.</p><button class="retry-button" onclick="homeModule.fetchDownloadLinks(${JSON.stringify(movie)}, this.parentElement)">Retry</button>`;
                }
            },

            async fetchRecommendations(movie, container) {
                if (movie.source === 'moviebox' && movie.data.subjectId) {
                    try {
                        const data = await fetchAPI(`${API_SOURCES.movieboxRec}${movie.data.subjectId}`);
                        const recs = data.data?.subjectList || [];
                        if (recs.length > 0) {
                            container.innerHTML = '<h4>Recommendations</h4>';
                            recs.slice(0, 5).forEach(rec => {
                                const normRec = this.normalizeData({ source: 'moviebox', data: rec });
                                container.innerHTML += `
                                    <div class="download-card">
                                        <div class="info-row">
                                            <div class="quality">${normRec.title}</div>
                                        </div>
                                        <div class="actions">
                                            <button class="action-button" onclick="homeModule.openModal(${JSON.stringify({ source: 'moviebox', data: rec })})">View</button>
                                        </div>
                                    </div>`;
                            });
                        }
                    } catch (err) {
                        console.error("Recommendations fetch failed:", err);
                    }
                }
            }
        };

        const nollywoodModule = {
            async fetchYouTubeVideos(query) {
                try {
                    const fullQuery = `${encodeURIComponent(query)}+full+movie`;
                    const data = await fetchAPI(`${API_SOURCES.youtubeSearch}${fullQuery}`);
                    if (!data.status) throw new Error('API returned unsuccessful status');
                    return data.result.map(item => ({
                        title: item.title,
                        thumbnail: item.imageUrl,
                        videoId: item.link.split('v=')[1]?.split('&')[0],
                        duration: item.duration
                    }));
                } catch (error) {
                    console.error(`YouTube search failed for "${query}":`, error);
                    return [];
                }
            },

            async displayVideos(query) {
                const resultsGrid = document.getElementById('nollywoodResultsGrid');
                document.getElementById('nollywoodSectionTitle').textContent = `Results for: ${query}`;
                resultsGrid.innerHTML = '<div class="loading-spinner"></div>';
                try {
                    const videos = await this.fetchYouTubeVideos(query);
                    resultsGrid.innerHTML = '';
                    if (videos.length > 0) {
                        videos.forEach(video => {
                            const card = document.createElement('div');
                            card.className = 'nollywood-movie-card';
                            card.innerHTML = `<img src="${video.thumbnail}" alt="${video.title}" loading="lazy" onerror="this.style.display='none'"/><div class="nollywood-movie-card-content"><h4>${video.title}</h4><p>Duration: ${video.duration}</p></div>`;
                            card.onclick = () => this.openModal(video);
                            resultsGrid.appendChild(card);
                        });
                    } else {
                        resultsGrid.innerHTML = `<p class="error-message">No Nollywood movies found.</p>`;
                    }
                    updateURL('/nollywood', query);
                } catch (err) {
                    resultsGrid.innerHTML = `<p class="error-message">Search failed.</p>`;
                }
            },

            openModal(video) {
                const modal = document.getElementById('nollywoodModal');
                const posterContainer = document.getElementById('nollywoodPosterContainer');
                const posterImg = document.getElementById('nollywoodModalPoster');
                const playBtn = document.getElementById('nollywoodModalPlayBtn');
                const playerContainer = document.getElementById('nollywoodModalPlayer');

                playerContainer.innerHTML = '';
                playerContainer.style.display = 'none';
                posterContainer.style.display = 'block';

                document.getElementById('nollywoodModalTitle').textContent = video.title;
                posterImg.src = video.thumbnail;
                posterImg.alt = video.title;
                document.getElementById('nollywoodModalDownload').href = `${API_SOURCES.youtubeDownload}https://www.youtube.com/watch?v=${video.videoId}`;

                const playFunction = () => {
                    posterContainer.style.display = 'none';
                    playerContainer.style.display = 'block';
                    playerContainer.innerHTML = `<iframe src="https://www.youtube.com/embed/${video.videoId}?autoplay=1" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                };
                
                playBtn.onclick = playFunction;
                posterImg.onclick = playFunction;

                modal.classList.add('show');
                updateURL('/nollywood', video.title);
            },

            closeModal() {
                const modal = document.getElementById('nollywoodModal');
                const playerContainer = document.getElementById('nollywoodModalPlayer');
                modal.classList.remove('show');
                playerContainer.innerHTML = '';
                updateURL('/nollywood');
            }
        };

        const adultModule = {
            async fetchAdultVideos(query) {
                try {
                    const data = await fetchAPI(`${API_SOURCES.adultSearch}${encodeURIComponent(query)}`);
                    if (!data.status) throw new Error('API returned unsuccessful status');
                    const videos = data.result;
                    const detailedVideos = await Promise.all(videos.map(async (item) => {
                        const downloadData = await this.fetchAdultDownload(item.link);
                        return {
                            title: item.title,
                            thumbnail: downloadData ? downloadData.image : FALLBACK_IMAGE,
                            url: item.link,
                            info: item.info
                        };
                    }));
                    return detailedVideos;
                } catch (error) {
                    console.error(`Adult search failed for "${query}":`, error);
                    return [];
                }
            },

            async fetchAdultDownload(url) {
                try {
                    const data = await fetchAPI(`${API_SOURCES.adultDownload}${encodeURIComponent(url)}`);
                    if (!data.status) throw new Error('API returned unsuccessful status');
                    return data.result;
                } catch (error) {
                    console.error(`Adult download failed for "${url}":`, error);
                    return null;
                }
            },

            async displayVideos(query) {
                const resultsGrid = document.getElementById('adultResultsGrid');
                document.getElementById('adultSectionTitle').textContent = `${query} Content`;
                resultsGrid.innerHTML = '<div class="loading-spinner"></div>';
                try {
                    const videos = await this.fetchAdultVideos(query);
                    resultsGrid.innerHTML = '';
                    if (videos.length > 0) {
                        videos.forEach(video => {
                            const card = document.createElement('div');
                            card.className = 'adult-movie-card';
                            card.innerHTML = `<img src="${video.thumbnail}" alt="${video.title}" loading="lazy" onerror="this.src='${FALLBACK_IMAGE}'"/><div class="adult-movie-card-content"><h4>${video.title}</h4><p>${video.info}</p></div>`;
                            card.onclick = () => {
                                this.openModal(video);
                                updateURL('/adult', video.title);
                            };
                            resultsGrid.appendChild(card);
                        });
                    } else {
                        resultsGrid.innerHTML = `<p class="error-message">No content found.</p>`;
                    }
                    updateURL('/adult', query);
                } catch (err) {
                    console.error("Adult search error:", err);
                    resultsGrid.innerHTML = `<p class="error-message">Search failed: ${err.message}. Please try again.</p>`;
                }
            },

            async openModal(video) {
                const modal = document.getElementById('adultModal');
                const posterContainer = document.getElementById('adultPosterContainer');
                const posterImg = document.getElementById('adultModalPoster');
                const playBtn = document.getElementById('adultModalPlay');
                const playerContainer = document.getElementById('adultModalPlayer');
                const downloadBtn = document.getElementById('adultModalDownload');

                playerContainer.innerHTML = '';
                playerContainer.style.display = 'none';
                posterContainer.style.display = 'block';

                document.getElementById('adultModalTitle').textContent = video.title;
                posterImg.src = video.thumbnail;
                posterImg.alt = video.title;
                downloadBtn.href = '#';

                const data = await this.fetchAdultDownload(video.url);
                if (data && data.files && data.files.high) {
                    downloadBtn.href = data.files.high;
                } else {
                    downloadBtn.href = '#';
                    downloadBtn.onclick = (e) => { e.preventDefault(); alert('Download link unavailable.'); };
                }

                const playFunction = () => {
                    posterContainer.style.display = 'none';
                    playerContainer.style.display = 'block';
                    playerContainer.innerHTML = `<video controls autoplay><source src="${data?.files?.HLS || ''}" type="application/x-mpegURL"></source><p>Your browser does not support this video.</p></video>`;
                };

                playBtn.onclick = playFunction;
                posterImg.onclick = playFunction;

                modal.classList.add('show');
                updateURL('/adult', video.title);
            },

            closeModal() {
                const modal = document.getElementById('adultModal');
                const playerContainer = document.getElementById('adultModalPlayer');
                modal.classList.remove('show');
                playerContainer.innerHTML = '';
                updateURL('/adult');
            }
        };

        const passwordModule = {
            checkPassword() {
                const savedPassword = localStorage.getItem('adultPassword');
                const passwordModal = document.getElementById('passwordModal');
                const passwordInput = document.getElementById('passwordInput');
                const submitBtn = document.getElementById('passwordSubmitBtn');
                const createBtn = document.getElementById('passwordCreateBtn');
                const title = document.getElementById('passwordModalTitle');

                if (!savedPassword) {
                    title.textContent = 'Create Password';
                    submitBtn.style.display = 'none';
                    createBtn.style.display = 'inline-block';
                    passwordModal.classList.add('show');
                } else {
                    title.textContent = 'Enter Password';
                    submitBtn.style.display = 'inline-block';
                    createBtn.style.display = 'none';
                    passwordModal.classList.add('show');
                }
                updateURL('/adult');
            },

            createPassword() {
                const passwordInput = document.getElementById('passwordInput').value;
                if (passwordInput.length < 6) {
                    alert('Password must be at least 6 characters long.');
                    return;
                }
                localStorage.setItem('adultPassword', passwordInput);
                document.getElementById('passwordModal').classList.remove('show');
                switchView('adult');
                updateURL('/adult');
            },

            verifyPassword() {
                const passwordInput = document.getElementById('passwordInput').value;
                const savedPassword = localStorage.getItem('adultPassword');
                if (passwordInput === savedPassword) {
                    document.getElementById('passwordModal').classList.remove('show');
                    switchView('adult');
                    updateURL('/adult');
                } else {
                    alert('Incorrect password.');
                    document.getElementById('passwordInput').value = '';
                }
            }
        };

        const initPWA = () => {
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('/sw.js').then(reg => {
                    console.log('Service Worker registered:', reg);
                }).catch(err => {
                    console.error('Service Worker registration failed:', err);
                });
            }

            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                const installPrompt = document.getElementById('installPrompt');
                installPrompt.classList.add('show');
                installPrompt.onclick = () => {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then(choiceResult => {
                        if (choiceResult.outcome === 'accepted') {
                            console.log('User accepted the install prompt');
                        } else {
                            console.log('User dismissed the install prompt');
                        }
                        deferredPrompt = null;
                        installPrompt.classList.remove('show');
                    });
                };
            });

            window.addEventListener('appinstalled', () => {
                console.log('PWA installed');
                document.getElementById('installPrompt').classList.remove('show');
            });
        };

        const init = () => {
            fetchRandomBackground();
            setInterval(fetchRandomBackground, 30000);

            const homepageContainer = document.getElementById('homepageSections');
            CATEGORIES.forEach(cat => {
                const section = document.createElement('div');
                section.className = 'section';
                section.innerHTML = `<h3>${cat}</h3><div class="swiper"><div class="swiper-wrapper"></div><div class="swiper-button-next"></div><div class="swiper-button-prev"></div></div>`;
                homepageContainer.appendChild(section);
                const swiper = new Swiper(section.querySelector('.swiper'), { slidesPerView: 'auto', spaceBetween: 25, navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' }, grabCursor: true });
                homeModule.loadCategory(swiper, cat.toLowerCase());
            });
            homeModule.loadHero();

            const yearList = document.getElementById('yearList');
            const nollywoodYearList = document.querySelector('.nollywood-year-list');
            const currentYear = new Date().getFullYear();
            for (let year = currentYear; year >= 1980; year--) {
                const yearLink = document.createElement('a');
                yearLink.href = '#'; yearLink.textContent = year;
                yearLink.onclick = (e) => { e.preventDefault(); homeModule.search(String(year)); document.getElementById('mainMenu').classList.remove('show'); };
                yearList.appendChild(yearLink);

                const nollywoodYearLink = yearLink.cloneNode(true);
                nollywoodYearLink.onclick = (e) => { e.preventDefault(); nollywoodModule.displayVideos(String(year) + ' nollywood movie'); document.getElementById('mainMenu').classList.remove('show'); };
                nollywoodYearList.appendChild(nollywoodYearLink);
            }

            document.getElementById('homeTab').onclick = () => switchView('home');
            document.getElementById('nollywoodTab').onclick = () => switchView('nollywood');
            document.getElementById('headerLogo').onclick = (e) => { e.preventDefault(); if (activeView === 'home') { location.reload(); } else { switchView('home'); }};
            
            document.getElementById('menuBtn').onclick = (e) => {
                e.stopPropagation();
                document.getElementById('mainMenu').classList.toggle('show');
            };
            
            document.getElementById('menuHomeBtn').onclick = (e) => { e.preventDefault(); switchView('home'); document.getElementById('mainMenu').classList.remove('show'); };
            document.getElementById('menuNollywoodBtn').onclick = (e) => { e.preventDefault(); switchView('nollywood'); document.getElementById('mainMenu').classList.remove('show'); };
            document.getElementById('menuAboutBtn').onclick = (e) => { e.preventDefault(); switchView('about'); document.getElementById('mainMenu').classList.remove('show'); };
            document.getElementById('menuAdultBtn').onclick = (e) => { e.preventDefault(); passwordModule.checkPassword(); document.getElementById('mainMenu').classList.remove('show'); };
            
            document.getElementById('searchInput').onkeypress = (e) => {
                if (e.key === 'Enter') {
                    const query = e.target.value.trim();
                    if (!query) return;
                    if (activeView === 'home') homeModule.search(query);
                    else if (activeView === 'nollywood') nollywoodModule.displayVideos(query);
                    else if (activeView === 'adult') adultModule.displayVideos(query);
                }
            };
            
            document.getElementById('adultSearchInput').onkeypress = (e) => {
                if (e.key === 'Enter') {
                    const query = e.target.value.trim();
                    if (query) adultModule.displayVideos(query);
                }
            };

            document.querySelectorAll('.side-menu-close').forEach(btn => btn.onclick = () => btn.parentElement.classList.remove('show'));
            document.querySelectorAll('.modal-close-button').forEach(btn => {
                btn.onclick = () => {
                    const modal = btn.closest('.modal');
                    modal.classList.remove('show');
                    if (modal.id === 'nollywoodModal') {
                        nollywoodModule.closeModal();
                    } else if (modal.id === 'adultModal') {
                        adultModule.closeModal();
                    } else if (modal.id === 'infoModal') {
                        const playerContainer = document.getElementById('modalPlayer');
                        playerContainer.style.display = 'none';
                        playerContainer.querySelector('video').pause();
                        playerContainer.querySelector('video').currentTime = 0;
                    }
                }
            });
            
            document.querySelectorAll('.nollywood-category').forEach(link => {
                link.onclick = (e) => { e.preventDefault(); nollywoodModule.displayVideos(link.dataset.query); document.getElementById('mainMenu').classList.remove('show'); };
            });
            
            document.querySelector('.nollywood-year-toggle').onclick = (e) => {
                e.preventDefault();
                document.querySelector('.nollywood-year-list').style.display = document.querySelector('.nollywood-year-list').style.display === 'block' ? 'none' : 'block';
            };

            document.querySelectorAll('.category-tabs .category-tab').forEach((tab, index) => {
                tab.textContent = ADULT_CATEGORIES[index];
                tab.dataset.query = ADULT_CATEGORIES[index];
                tab.onclick = () => {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    adultModule.displayVideos(tab.dataset.query);
                };
            });

            document.getElementById('donateBtn').onclick = (e) => {
                e.preventDefault();
                alert('Thank you for considering a donation! This feature is coming soon.');
            };

            document.getElementById('adultDonateBtn').onclick = (e) => {
                e.preventDefault();
                alert('Thank you for considering a donation! This feature is coming soon.');
            };

            document.getElementById('passwordSubmitBtn').onclick = () => passwordModule.verifyPassword();
            document.getElementById('passwordCreateBtn').onclick = () => passwordModule.createPassword();

            document.addEventListener('click', (e) => {
                if (!e.target.closest('.side-menu') && !e.target.closest('.menu-button')) {
                    document.querySelectorAll('.side-menu.show').forEach(menu => menu.classList.remove('show'));
                }
            });

            window.onkeydown = (e) => {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal.show').forEach(modal => {
                        modal.classList.remove('show');
                        if (modal.id === 'nollywoodModal') {
                            nollywoodModule.closeModal();
                        } else if (modal.id === 'adultModal') {
                            adultModule.closeModal();
                        } else if (modal.id === 'infoModal') {
                            const playerContainer = document.getElementById('modalPlayer');
                            playerContainer.style.display = 'none';
                            playerContainer.querySelector('video').pause();
                            playerContainer.querySelector('video').currentTime = 0;
                        }
                    });
                }
            };

            // Initial view based on URL
            const { view, query } = parseURL();
            switchView(view, query);
        };

        initPWA();
        init();
    });
  </script>
</body>
</html>
